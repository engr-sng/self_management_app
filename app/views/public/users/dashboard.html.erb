<div class="wrapper">
  <div class="container flex-box">
    <div class="box-100">
      <h2><%= @user.display_name %>さんのダッシュボード</h2>
    </div>

    <div class="box-25">
      <div class="announcement_header">
        <h3>担当タスク</h3>
      </div>
      <div class="announcement_body">
        <p><%= @user.task_count %>件<p>
      </div>
    </div>

    <div class="box-25">
      <div class="announcement_header">
        <h3>完了タスク</h3>
      </div>
      <div class="announcement_body">
        <p><%= @user.task_complete %>件<p>
      </div>
    </div>

    <div class="box-25">
      <div class="announcement_header">
        <h3>残りタスク</h3>
      </div>
      <div class="announcement_body">
        <p><%= @user.task_remaining %>件<p>
      </div>
    </div>

    <div class="box-25">
      <div class="announcement_header">
        <h3>タスク進捗率</h3>
      </div>
      <div class="announcement_body">
        <p><%= @user.task_progress %>%<p>
      </div>
    </div>

    <div class="box-100">
      <h2>プロジェクト一覧</h2>
    </div>

    <div class="box-100">
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>プロジェクト名</th>
              <th>開始日</th>
              <th>終了日</th>
              <th>ステータス</th>
              <th>進捗率</th>
            </tr>
          </thead>
          <tbody>
            <% @user.project_members.each do |join_project| %>
            <tr>
              <td><%= link_to join_project.project.title, project_path(join_project.project.id), method: :get %></td>
              <td><%= join_project.project.project_start_date %></td>
              <td><%= join_project.project.project_end_date %></td>
              <td><%= join_project.project.project_status %></td>
              <td><%= join_project.project.project_progress %>%</td>
            </tr>
          </tbody>
          <% end %>
        </table>
      </div>
    </div>

    <div class="box-100">
      <%= link_to "プロジェクト新規作成", new_project_path, method: :get, class: "btn green-color" %>
    </div>

    <div class="box-100">
      <h2>タスク一覧</h2>
    </div>

    <div class="box-100">
      <ul class="search-list">
        <li class="search-list-item"><%= link_to "担当タスク", my_task_refinement_path(refinement: "all"), method: :post, remote: true %></li>
        <li class="search-list-item"><%= link_to "完了タスク", my_task_refinement_path(refinement: "complete"), method: :post, remote: true %></li>
        <li class="search-list-item"><%= link_to "残りタスク", my_task_refinement_path(refinement: "remaining"), method: :post, remote: true %></li>
      </ul>
    </div>

    <div class="box-100">
      <div class="table-container" id="my_task_refinement">

        <%= render "public/users/my_task_refinement", { user: @user, refinement: @refinement } %>

      </div>
    </div>
  </div>
</div>